<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="description" content="Foodeiblog Template">
    <meta name="keywords" content="Foodeiblog, unica, creative, html">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="icon" href="/img/icon.png" type="image/png">
    <title>Weather</title>

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css?family=Nunito+Sans:300,400,600,700,800,900&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Unna:400,700&display=swap" rel="stylesheet">

    <!-- Css Styles -->
    <link rel="stylesheet" href="/css/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="/css/font-awesome.min.css" type="text/css">
    <link rel="stylesheet" href="/css/elegant-icons.css" type="text/css">
    <link rel="stylesheet" href="/css/owl.carousel.min.css" type="text/css">
    <link rel="stylesheet" href="/css/slicknav.min.css" type="text/css">
    <link rel="stylesheet" href="/css/style.css" type="text/css">

</head>

<body>
    <%- include('./partials/header.ejs') %>

    <!-- Single Post Section Begin -->
        <section class="single-post spad">
            <div class="single-post__hero set-bg" data-setbg="images/single-post-hero.jpg"></div>
            <div class="container">
                <div class="row d-flex justify-content-center">
                    <div class="col-lg-8">
                        <div class="single-post__title">
                            <div class="single-post__title__meta">
                                <h2>29</h2>
                                <span>June</span>
                            </div>
                            <div class="single-post__title__text">
                                <ul class="label">
                                    <li>Weather</li>
                                </ul>
                                <h4>Weather</h4>
                                <ul class="widget">
                                    <li>by Tommy</li>
                                    <li>3 min read</li>
                                </ul>
                            </div>
                        </div>
                        <div class="single-post__social__item">
                            <ul>
                                <li><a href="#"><i class="fa fa-facebook"></i></a></li>
                                <li><a href="#"><i class="fa fa-twitter"></i></a></li>
                                <li><a href="#"><i class="fa fa-instagram"></i></a></li>
                                <li><a href="#"><i class="fa fa-youtube-play"></i></a></li>
                            </ul>
                        </div>
                        <div class="single-post__top__text">
                            <p>Weather is the state of the atmosphere, including temperature, atmospheric pressure,
                                wind,
                                humidity, precipitation, and cloud cover. It differs from climate, which is all weather
                                conditions for a particular location averaged over about 30 years.</p>
                        </div>

                        <div class="single-post__leave__comment">
                            <div class="widget__title">
                                <h4>Search a City Temperature</h4>
                            </div>
                            <form action="/weather" method="POST">
                                <textarea placeholder="Enter city name" name="cityName" id="cityInput" spellcheck="false"></textarea>          
                                <button type="submit" class="site-btn">Submit</button>
                            </form>
                        </div>
                        <br/>
                        <div class="single-post__quote">
                            <p>I have seen many storms in my life. Most storms have caught me by surprise, so I had
                                to learn very quickly to look further and understand that I am not capable of
                                controlling the weather, to exercise the art of patience and to respect the fury of
                                nature.</p>
                            <span>Paula Coelho</span>
                        </div>
                        <div class="single-post__tags">
                            <a href="#">Weather</a>
                            <a href="#">Humidity</a>
                            <a href="#">City</a>
                            <a href="#">Wind Speed</a>
                        </div>
                        <div class="single-post__author__profile">
                            <div class="single-post__author__profile__pic">
                                <img src="/img/categories/single-post/author-profile.jpg" alt="">
                            </div>
                            <div class="single-post__author__profile__text">
                                <h4>Jim Cantore</h4>
                                <p>Part of The Weather Channel for over 35 years, Jim Cantore is a famous on-air
                                    personality for all things weather.</p>
                                <div class="single-post__author__profile__social">
                                    <a href="#"><i class="fa fa-facebook"></i></a>
                                    <a href="#"><i class="fa fa-twitter"></i></a>
                                    <a href="#"><i class="fa fa-google-plus"></i></a>
                                    <a href="#"><i class="fa fa-instagram"></i></a>
                                    <a href="#"><i class="fa fa-youtube-play"></i></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- Single Post Section End -->

        <!-- Footer Section Begin -->
        <footer class="footer">
            <div class="container-fluid">
                <div class="footer__instagram">
                    <div class="footer__instagram__avatar">
                        <div class="footer__instagram__avatar--pic">
                            <img src="images/instagram-avatar.png" alt="">
                        </div>
                        <div class="footer__instagram__avatar--text">
                            <h5>@weatherblog </h5>
                            <span>23,7k follower</span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-2 col-md-2 col-sm-4 col-6">
                            <div class="footer__instagram__item set-bg" data-setbg="images/ip-1.jpg"></div>
                        </div>
                        <div class="col-lg-2 col-md-2 col-sm-4 col-6">
                            <div class="footer__instagram__item set-bg" data-setbg="images/ip-2.jpg"></div>
                        </div>
                        <div class="col-lg-2 col-md-2 col-sm-4 col-6">
                            <div class="footer__instagram__item set-bg" data-setbg="images/ip-3.jpg"></div>
                        </div>
                        <div class="col-lg-2 col-md-2 col-sm-4 col-6">
                            <div class="footer__instagram__item set-bg" data-setbg="images/ip-4.jpg"></div>
                        </div>
                        <div class="col-lg-2 col-md-2 col-sm-4 col-6">
                            <div class="footer__instagram__item set-bg" data-setbg="images/ip-5.jpg"></div>
                        </div>
                        <div class="col-lg-2 col-md-2 col-sm-4 col-6">
                            <div class="footer__instagram__item set-bg" data-setbg="images/ip-6.jpg"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="footer__text">
                            <div class="footer__logo">
                                <h1>Weather</h1>
                            </div>
                            <p>Weather is the state of the atmosphere, describing for example the degree to which it is hot or cold, wet or dry, calm or stormy, clear or cloudy. On Earth, most weather phenomena occur in the lowest layer of the planet's atmosphere, the troposphere, just below the stratosphere. Weather refers to day-to-day temperature, precipitation, and other atmospheric conditions, whereas climate is the term for the averaging of atmospheric conditions over longer periods of time. When used without qualification, "weather" is generally understood to mean the weather of Earth.</p>
                            <div class="footer__social">
                                <a href="#"><i class="fa fa-facebook"></i></a>
                                <a href="#"><i class="fa fa-twitter"></i></a>
                                <a href="#"><i class="fa fa-instagram"></i></a>
                                <a href="#"><i class="fa fa-youtube-play"></i></a>
                                <a href="#"><i class="fa fa-envelope-o"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </footer>
    <!-- Footer Section End -->

    <!-- Js Plugins -->
    <script src="/js/jquery-3.3.1.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/jquery.slicknav.js"></script>
    <script src="/js/owl.carousel.min.js"></script>
    <script src="/js/main.js"></script>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            fetchWeatherData()
                .then(data => {
                    updateWeatherData(data);
                })
                .catch(error => {
                    console.error(error);
                });
        });

        async function fetchWeatherData() {
            try {
                const response = await fetch("/weather");
                const data = await response.json();
                return data;
            } catch (error) {
                throw new Error("Failed to fetch weather data");
            }
        }

        function updateWeatherData(data) {
            const cityElement = document.getElementById("city");
            const tempElement = document.getElementById("temp");
            const humidityElement = document.getElementById("humidity");
            const windSpeedElement = document.getElementById("speed");

            cityElement.textContent = data.city;
            tempElement.textContent = data.temp;
            humidityElement.textContent = data.humidity;
            windSpeedElement.textContent = data.windSpeed;
        }

    </script>

</body>

</html>